/*! walking_skeleton_group_project 2016-03-11 */
function createCompanyName(){companyName="";var a="abcdefghijklmnopqrstuvwxyz";for(i=0;i<randomNumber(0,6);i++)companyName+=a.charAt(randomNumber(0,25));companyName+="ion",companyName=companyName[0].toUpperCase()+companyName.slice(1),console.log(companyName)}function addNewEmployee(){console.log("Add new employee called"),addGuyWithAjax(objSkillBoxArray)}function calcSprint(){for(var a,b=0,c=0,d=0,e=0;e<team.length;e++)"Front End"==team[e].skill?b+=team[e].scrumNum:"Clientside Logic"==team[e].skill?c+=team[e].scrumNum:"Serverside Logic"==team[e].skill&&(d+=team[e].scrumNum);c=clientReq/c,b=frontEndReq/b,d=serverReq/d,a=Math.max(b,c,d),$(".sprints").html("<p>Total Sprints to finish project is: "+Math.ceil(a)+"</p>")}function addGuyWithAjax(a){$.ajax({type:"POST",url:"/emps",data:a,success:function(a){team.push(a),console.log(team),$(".employees-container").append('<div class="employee"></div>');var b=$(".employees-container").children().last();b.append("<p>"+a.name+" have skills "+a.skill+" and scrum number "+a.scrumNum+"</p>"),calcSprint()}})}function postWithAjax(a){$.ajax({type:"POST",url:"/emps",data:a,success:function(b){team.push(b),console.log(team),$(".employees-container").append('<div class="employee"></div>');var c=$(".employees-container").children().last();c.append("<p>"+b.name+" have skills "+b.skill+" and scrum number "+b.scrumNum+"</p>");for(var d=0;d<a.skills.length;d++)b.skill==a.skills[d]&&(a.skills.splice(d,1),a.skills.length>0?postWithAjax(a):0==a.skills.length&&(calcSprint(),$(".employees-container").append('<button class="add-employee">Add new staff</button>')))}})}function assignStaff(){$(".employees-container").empty(),team=[];var a={skills:["Front End","Clientside Logic","Serverside Logic"]};postWithAjax(a)}function listEmps(a){console.log("we are client side looking at returned data",a.name)}function initialize(){createListeners()}function makeProject(){team=[],$(".employees-container").empty(),$(".sprints").empty(),console.log("we are in make project"),createCompanyName(),setRequirements(),displayProject(),addStaffButton()}function addStaffListener(){$(".company-name").on("click",".assign-staff",assignStaff)}function addStaffButton(){$(".company-name").append('<button class="assign-staff">Assign Staff</button>')}function setRequirements(){frontEndReq=0,clientReq=0,serverReq=0,frontEndReq=randomNumber(10,60),clientReq=randomNumber(10,60),serverReq=randomNumber(10,60)}function displayProject(){$(".company-name").empty(),$(".company-name").append("<p>Company Name:  "+companyName+"</p>"),$(".company-name").append("<p>Front End Requirements:  "+frontEndReq+"</p>"),$(".company-name").append("<p>Clientside Logic Requirements:  "+clientReq+"</p>"),$(".company-name").append("<p>Serverside Logic Requirements:  "+serverReq+"</p>")}var debug=!0,companyName="",frontEndReq=0,clientReq=0,serverReq=0,randomNumber=function(a,b){return Math.floor(Math.random()*(1+b-a)+a)},team=[],objSkillBoxArray={skills:["Front End","Clientside Logic","Serverside Logic"]};$(document).ready(function(){$("#projectForm").on("submit",function(a){a.preventDefault()}),$(".project").on("click",".make-project",makeProject),$(".employees-container").on("click",".add-employee",addNewEmployee),$(".company-name").on("click",".assign-staff",assignStaff)});